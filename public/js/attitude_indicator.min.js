!function(e){e.AttitudeIndicator=function(e,t){this.autoUpdate=t,this.horizontalAngle=0,this.verticalAngle=0,this.noiseBarrier=.25,this.maximumVerticalDegrees=30,this.minimumVerticalDegrees=-30,this.degreesPerLine=5,this.verticalMeasurementlineId="artificialHorizon__verticalMeasurementLine",this.node=document.querySelector(e),this.initElements(),window.addEventListener("resize",this.resize.bind(this)),this.resize()};var t=e.AttitudeIndicator.prototype;t.initElements=function(){var t=document.createDocumentFragment();this.wrapperNode=document.createElement("div"),this.wrapperNode.className="attitude_indicator__wrapper",this.movingWrapperNode=document.createElement("div"),this.movingWrapperNode.className="attitude_indicator__wrapperMoving",this.groundNode=document.createElement("div"),this.groundNode.className="attitude_indicator__absolute attitude_indicator__half_screen attitude_indicator__ground",this.skyNode=document.createElement("div"),this.skyNode.className="attitude_indicator__absolute attitude_indicator__half_screen attitude_indicator__sky",this.wrapperNode.appendChild(this.movingWrapperNode),this.planeMarkNode=document.createElement("div"),this.planeMarkNode.className="attitude_indicator__planeMark attitude_indicator__absolute",this.wrapperNode.appendChild(this.planeMarkNode),this.planeMarkImage=document.createElement("img"),this.planeMarkImage.src=e.AttitudeIndicator.path+"/img/plane_mark.gif",this.planeMarkImage.style.position="absolute",this.planeMarkImage.style.top="50%",this.planeMarkImage.style.opacity="0.6",this.planeMarkImage.setAttribute("width","100%"),this.planeMarkImage.setAttribute("height","auto"),this.planeMarkNode.appendChild(this.planeMarkImage),t.appendChild(this.wrapperNode),this.node.appendChild(t),this.createHorizontalDegreesLine(),this.createHorizontalDegreesMark()},t.resize=function(){this.pixelsInDegree=Math.ceil(this.movingWrapperNode.offsetHeight/90),this.refreshVerticalDegreesLine(),this.refreshHorizontalMeasurePosition()},t.refreshHorizontalMeasurePosition=function(){this.wrapperNode.offsetHeight,this.horizontalDegreesLine.offsetWidth;this.horizontalDegreesLine.style.top="0px",this.refreshHorizontalMark()},t.refreshHorizontalMark=function(){var e=this.horizontalDegreesLine.offsetWidth;this.horizontalDegreesMark.style.height=e+"px",this.horizontalDegreesMark.style.top="0px"},t.refreshVerticalDegreesLine=function(){this.verticalMeasurementlineContainer&&(this.verticalMeasurementline=null,this.wrapperNode.removeChild(this.verticalMeasurementlineContainer)),this.createVerticalDegreesLine()},t.createHorizontalDegreesLine=function(){this.horizontalDegreesLine=document.createElement("div"),this.horizontalDegreesLine.className="artificialHorizon__horizontalDegreesLine",this.wrapperNode.appendChild(this.horizontalDegreesLine)},t.createHorizontalDegreesMark=function(){this.horizontalDegreesMark=document.createElement("div"),this.horizontalDegreesMark.className="artificialHorizon__horizontalDegreesMark",this.wrapperNode.appendChild(this.horizontalDegreesMark)},t.createVerticalDegreesLine=function(){var e=document.createElement("div");e.className="artificialHorizon__verticalMeasurementLine_container",e.id=this.verticalMeasurementlineId;var t=document.createElement("div");t.className="artificialHorizon__verticalMeasurementLine";for(var i=this.pixelsInDegree*this.degreesPerLine,r=360/this.degreesPerLine,a=this.wrapperNode.offsetHeight/4,n=-(r/2);r>n;n++){var s=document.createElement("div");s.className="artificialHorizon__verticalMeasurementLine__verticalLine",s.style.top=n*i+a+"px";var o=n*this.degreesPerLine;if(o%2===0){var l=document.createElement("p");l.className="artificialHorizon__verticalMeasurementLine__label",l.innerHTML=Math.abs(o),s.style.width="100%",s.style.marginLeft="0%",s.appendChild(l)}t.appendChild(s)}e.appendChild(t),this.verticalMeasurementline=t,this.verticalMeasurementlineContainer=e,this.wrapperNode.appendChild(this.verticalMeasurementlineContainer)},t.updateAngles=function(e,t){var i=this.horizontalAngle!==e,r=this.verticalAngle!==t;if(i===!0&&(this.horizontalDegreesMark.style.webkitTransform="rotate("+e+"deg)",this.horizontalDegreesMark.style.transform="rotate("+e+"deg)",this.horizontalAngle=e),r===!0){var a=Math.min(t,this.maximumVerticalDegrees);a=Math.max(t,this.minimumVerticalDegrees);var n=a*this.pixelsInDegree,s=t*this.pixelsInDegree;this.verticalMeasurementline.style.webkitTransform="translate(0, "+s+"px)",this.verticalMeasurementline.style.transform="translate(0, "+s+"px)",this.verticalAngle=t}(i===!0||r===!0)&&(this.movingWrapperNode.style.webkitTransform="rotate("+-e+"deg) translate(0, "+n+"px)",this.movingWrapperNode.style.transform="rotate("+-e+"deg) translate(0, "+n+"px)"),this.horizontalAngle=e,this.verticalAngle=t},t.initMotionListener=function(){void 0!==e.DeviceOrientationEvent&&this.autoUpdate!==!1&&e.addEventListener("deviceorientation",this.onOrientationChanged.bind(this))},t.onOrientationChanged=function(e){var t=e[this.getVerticalAxis()];window.AttitudeIndicator.iOS===!0&&(t=-t-90);var i=this.filterByNoiseBarrier(this.horizontalAngle,e[this.getHorizontalAxis()]),r=this.filterByNoiseBarrier(this.verticalAngle,t);this.updateAngles(i,r)},t.getHorizontalAxis=function(){return void 0===this.horizontalAxis&&(window.AttitudeIndicator.iOS?this.horizontalAxis="beta":this.horizontalAxis="gamma"),this.horizontalAxis},t.getVerticalAxis=function(){return void 0===this.verticalAxis&&(window.AttitudeIndicator.iOS?this.verticalAxis="gamma":this.verticalAxis="beta"),this.verticalAxis},t.filterByNoiseBarrier=function(e,t){return Math.abs(e-t)>this.noiseBarrier&&(e=t),e}}(window);var head=document.getElementsByTagName("head")[0],styleTag=document.createElement("link"),scripts=document.getElementsByTagName("script"),src=scripts[scripts.length-1].src.substring(0,scripts[scripts.length-1].src.lastIndexOf("/")+1);window.AttitudeIndicator.path=src,window.AttitudeIndicator.iOS=navigator.userAgent.match(/iP\w+/g)?!0:!1,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},a=function(){return i.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,a.prototype=new r,a});