Math3D={},Math3D.Angle=function(){},Math3D.Angle.radian=function(t){return.0174532925199433*t},Math3D.Angle.degree=function(t){return 57.29577951308232*t},Math3D.Angle.wrap=function(t){return t-6.283185307179586*Math.floor((t+Math.PI)/6.283185307179586)},Math3D.BuildDate=function(){},Math3D.MyMath=function(){},Math3D.MyMath.random=function(t,i){return t+Math.random()*(i-t)},Math3D.MyMath.randomInt=function(t,i){return t+Std.random(i-t+1)},Math3D.MyMath.clamp=function(t,i,h){if(i>h){var e=i;i=h,h=e}return i>t?i:t>h?h:t},Math3D.MyMath.linearMap=function(t,i,h,e,n){return e+(t-i)*(n-e)/(h-i)},Math3D.MyMath.linearClampMap=function(t,i,h,e,n){return Math3D.MyMath.clamp(Math3D.MyMath.linearMap(t,i,h,e,n),e,n)},Math3D.MyMath.lerp=function(t,i,h){return t+(i-t)*h},Math3D.MyMath.inRange=function(t,i,h){return t>=i&&h>=t},Math3D.MyMath.wrap=function(t,i){return t>0?t%i:i+t%i},Math3D.MyMath.absoluteSub=function(t,i){return t>0?(t-=i,0>t&&(t=0)):(t+=i,t>0&&(t=0)),t},Math3D.MyMath.sign=function(t){return t>0?1:0>t?-1:0},Math3D.MyMath.square=function(t){return t*t},Math3D.MyMath.round=function(t,i){var h=Math.pow(10,i);return Math.round(t*h)/h},Math3D.MyMath.lengthVector=function(t,i){return Math.sqrt(t*t+i*i)},Math3D.MyMath.ease=function(t,i,h,e){return t+(i-t)*(1-Math.exp(-h*e))},Math3D.MyMath.valueToTypes=function(t,i){for(var h=i.length,e=!1,n=0;h>n;){var s=n++,r=h-1-s;i[r]=e?-1:t%10|0,t=t/10|0,0==t&&(e=!0)}},Math3D.MyMath.valueToTypes2=function(t,i){for(var h=i.length,e=!1,n=0;h>n;){var s=n++,r=h-1-s;i[r]=e?0:t%10|0,t=t/10|0,0==t&&(e=!0)}},Math3D.Stopwatch=function(){this.start(),this.start=function(){this.startTime=haxe.Timer.stamp()},this.getTime=function(){return haxe.Timer.stamp()-this.startTime}},Math3D.geometry={},Math3D.geometry.EulerAngles=function(t,i,h){this.heading=t,this.pitch=i,this.bank=h,this.toString=function(){return"heading: "+this.heading+" pitch: "+this.pitch+" bank: "+this.bank}},Math3D.geometry.LineSegment2=function(t,i){this.p1=t,this.p2=i},Math3D.geometry.LineSegment2.isIntersect=function(t,i){return((t.p1.x-t.p2.x)*(i.p1.y-t.p1.y)+(t.p1.y-t.p2.y)*(t.p1.x-i.p1.x))*((t.p1.x-t.p2.x)*(i.p2.y-t.p1.y)+(t.p1.y-t.p2.y)*(t.p1.x-i.p2.x))<0&&((i.p1.x-i.p2.x)*(t.p1.y-i.p1.y)+(i.p1.y-i.p2.y)*(i.p1.x-t.p1.x))*((i.p1.x-i.p2.x)*(t.p2.y-i.p1.y)+(i.p1.y-i.p2.y)*(i.p1.x-t.p2.x))<0?!0:!1},Math3D.geometry.Matrix3x3=function(){this.set=function(t,i,h,e,n,s,r,o,a){this.m11=t,this.m12=i,this.m13=h,this.m21=e,this.m22=n,this.m23=s,this.m31=r,this.m32=o,this.m33=a},this.setIdentity=function(){this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1},this.setRotationX=function(t){var i=Math.cos(t),h=Math.sin(t);this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=i,this.m23=-h,this.m31=0,this.m32=h,this.m33=i},this.setRotationY=function(t){var i=Math.cos(t),h=Math.sin(t);this.m11=i,this.m12=0,this.m13=h,this.m21=0,this.m22=1,this.m23=0,this.m31=-h,this.m32=0,this.m33=i},this.setRotationZ=function(t){var i=Math.cos(t),h=Math.sin(t);this.m11=i,this.m12=-h,this.m13=0,this.m21=h,this.m22=i,this.m23=0,this.m31=0,this.m32=0,this.m33=1},this.toString=function(){return"["+this.m11+" "+this.m12+" "+this.m13+"]\n["+this.m21+" "+this.m22+" "+this.m23+"]\n["+this.m31+" "+this.m32+" "+this.m33+"]\n"},this.multiplyVector=function(t){var i=this.m11*t.x+this.m12*t.y+this.m13*t.z,h=this.m21*t.x+this.m22*t.y+this.m23*t.z,e=this.m31*t.x+this.m32*t.y+this.m33*t.z;return new Math3D.geometry.Vector3(i,h,e)}},Math3D.geometry.Polygon2=function(t){this.vertices=null!=t?t:[],this.addVertex=function(t,i){this.vertices.push(new Math3D.geometry.Vector2(t,i))},this.translate=function(t,i){for(var h=0,e=this.vertices;h<e.length;){var n=e[h];++h,n.x+=t,n.y+=i}},this.scale=function(t,i){for(var h=0,e=this.vertices;h<e.length;){var n=e[h];++h,n.x*=t,n.y*=i}},this.area=function(){var t,i,h,e,n=0;for(t=0,i=this.vertices.length-1;t<this.vertices.length;i=t,t++)h=this.vertices[t],e=this.vertices[i],n+=h.x*e.y,n-=h.y*e.x;return n/=2},this.centroid=function(){var t,i,h,e,n,s=0,r=0;for(t=0,i=this.vertices.length-1;t<this.vertices.length;i=t,t++)e=this.vertices[t],n=this.vertices[i],h=e.x*n.y-n.x*e.y,s+=(e.x+n.x)*h,r+=(e.y+n.y)*h;return h=6*this.area(),{x:s/h,y:r/h}},this.computeBoundingBox=function(){this.boundingBox=Math3D.geometry.Rect.createBoundingBox();for(var t=0,i=this.vertices;t<i.length;){var h=i[t];++t,this.boundingBox.extend(h.x,h.y)}},this.contains=function(t,i){if(null!=this.boundingBox&&!this.boundingBox.contains(t,i))return!1;if(this.vertices.length<=2)return!1;for(var h=0,e=this.vertices[0],n=t<=e.x,s=i<=e.y,r=1,o=this.vertices.length+1;o>r;){var a=r++,y=this.vertices[a%this.vertices.length],u=t<=y.x,c=i<=y.y;s!=c&&(n==u?n&&(h+=s?-1:1):t<=e.x+(y.x-e.x)*(i-e.y)/(y.y-e.y)&&(h+=s?-1:1)),e=y,n=u,s=c}return 0!=h},this.distanceFromLine=function(t,i,h){var e=h.x-i.x,n=h.y-i.y,s=((t.x-i.x)*e+(t.y-i.y)*n)/(e*e+n*n);isNaN(s)&&(s=0);var r;r=0>s?i:s>1?h:{x:i.x+s*e,y:i.y+s*n};var o={x:t.x-r.x,y:t.y-r.y};return Math.sqrt(o.x*o.x+o.y*o.y)},this.distance=function(t,i){var h,e,n=Number.MAX_VALUE;for(h=0,e=this.vertices.length-1;e>h;h++){var s=h-1;0>s&&(s=e-1);var r=this.vertices[h],o=this.vertices[s],a=this.distanceFromLine({x:t,y:i},o,r);n>a&&(n=a)}return n}},Math3D.geometry.Quaternion=function(t,i,h,e){this.x=t,this.y=i,this.z=h,this.w=e,this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},this.mul=function(t){var i=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,h=this.w*t.y+this.y*t.w+this.z*t.x-this.x*t.z,e=this.w*t.z+this.z*t.w+this.x*t.y-this.y*t.x,n=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z;return new Math3D.geometry.Quaternion(i,h,e,n)},this.div=function(t){this.x/=t,this.y/=t,this.z/=t,this.w/=t},this.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},this.conjugate=function(){return new Math3D.geometry.Quaternion(-this.x,-this.y,-this.z,this.w)},this.inverse=function(){var t=this.conjugate(),i=this.norm();return t.x/=i,t.y/=i,t.z/=i,t.w/=i,t},this.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},this.get_eulerAngles=function(){var t,i,h,e=-2*(this.z*this.y-this.w*this.x);return Math.abs(e)>.998?(i=Math.PI/2*e,t=Math.atan2(-this.x*this.y+this.w*this.z,.5-this.z*this.z-this.y*this.y),h=0):(i=Math.asin(e),t=Math.atan2(this.x*this.y+this.w*this.z,.5-this.x*this.x-this.z*this.z),h=Math.atan2(this.x*this.z+this.w*this.y,.5-this.x*this.x-this.y*this.y)),new Math3D.geometry.EulerAngles(t,i,h)},this.getAngle=function(){return 2*Math.acos(this.w)}},Math3D.geometry.Quaternion.euler=function(t,i,h){var e=Math3D.geometry.Quaternion.angleAxis(t,new Math3D.geometry.Vector3(0,0,1)),n=Math3D.geometry.Quaternion.angleAxis(i,new Math3D.geometry.Vector3(1,0,0)),s=Math3D.geometry.Quaternion.angleAxis(h,new Math3D.geometry.Vector3(0,1,0));return s.mul(n).mul(e)},Math3D.geometry.Quaternion.angleAxis=function(t,i){var h=t/2,e=Math.sin(h);return new Math3D.geometry.Quaternion(e*i.x,e*i.y,e*i.z,Math.cos(h))},Math3D.geometry.Rect=function(t,i,h,e){null==e&&(e=0),null==h&&(h=0),null==i&&(i=0),null==t&&(t=0),this.x0=t,this.y0=i,this.x1=h,this.y1=e,this.contains=function(t,i){return this.x0<=t&&t<this.x1&&this.y0<=i&&i<this.y1},this.extend=function(t,i){this.x0>t&&(this.x0=t),this.x1<t&&(this.x1=t),this.y0>i&&(this.y0=i),this.y1<i&&(this.y1=i)},this.hitTest=function(t){return t.x1<this.x0||t.x0>this.x1?!1:t.y1<this.y0||t.y0>this.y1?!1:!0},this.toString=function(){return"("+this.x0+", "+this.y0+", "+this.x1+", "+this.y1+")"}},Math3D.geometry.Rect.createSquare=function(t,i,h){return new Math3D.geometry.Rect(t-h,i-h,t+h,i+h)},Math3D.geometry.Rect.createBoundingBox=function(){return new Math3D.geometry.Rect(Math.POSITIVE_INFINITY,Math.POSITIVE_INFINITY,Math.NEGATIVE_INFINITY,Math.NEGATIVE_INFINITY)},Math3D.geometry.Vector2=function(t,i){this.x=t,this.y=i,this.set=function(t,i){this.x=t,this.y=i},this.copy=function(t){this.x=t.x,this.y=t.y},this.clone=function(){return new Math3D.geometry.Vector2(this.x,this.y)},this.toString=function(){return"("+this.x+", "+this.y+")"},this.rotate=function(t){var i=Math.cos(t),h=Math.sin(t),e=this.x*i-this.y*h,n=this.x*h+this.y*i;this.x=e,this.y=n},this.add2=function(t){this.x+=t.x,this.y+=t.y},this.mul=function(t){return new Math3D.geometry.Vector2(this.x*t,this.y*t)},this.div=function(t){return new Math3D.geometry.Vector2(this.x/t,this.y/t)},this.scale=function(t){this.x*=t.x,this.y*=t.y}},Math3D.geometry.Vector2.distanceSquared=function(t,i){var h=t.x-i.x,e=t.y-i.y;return h*h+e*e},Math3D.geometry.Vector2.distance=function(t,i){var h=t.x-i.x,e=t.y-i.y;return Math.sqrt(h*h+e*e)},Math3D.geometry.Vector2.dot=function(t,i){return t.x*i.x+t.y*i.y},Math3D.geometry.Vector2.lerp=function(t,i,h){var e=t.x+(i.x-t.x)*h,n=t.y+(i.y-t.y)*h;return new Math3D.geometry.Vector2(e,n)},Math3D.geometry.Vector3=function(t,i,h){null==h&&(h=0),null==i&&(i=0),null==t&&(t=0),this.x=t,this.y=i,this.z=h,this.set=function(t,i,h){this.x=t,this.y=i,this.z=h},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z},this.clone=function(){return new Math3D.geometry.Vector3(this.x,this.y,this.z)},this.multiply=function(t){var i=t.m11*this.x+t.m12*this.y+t.m13*this.z,h=t.m21*this.x+t.m22*this.y+t.m23*this.z,e=t.m31*this.x+t.m32*this.y+t.m33*this.z;this.x=i,this.y=h,this.z=e},this.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},this.rotate=function(t){var i=new Math3D.geometry.Quaternion(this.x,this.y,this.z,0),h=t.inverse(),e=t.mul(i).mul(h);this.x=e.x,this.y=e.y,this.z=e.z},this.rotateZ=function(t){var i=Math.cos(t),h=Math.sin(t),e=this.x*i-this.y*h,n=this.x*h+this.y*i;this.x=e,this.y=n},this.mul=function(t){return new Math3D.geometry.Vector3(this.x*t,this.y*t,this.z*t)},this.div=function(t){return new Math3D.geometry.Vector3(this.x/t,this.y/t,this.z/t)},this.scale=function(t){this.x*=t.x,this.y*=t.y,this.z*=t.z},this.normalize=function(){var t=this.get_magnitude();this.x/=t,this.y/=t,this.z/=t},this.get_normalized=function(){var t=this.get_magnitude();return new Math3D.geometry.Vector3(this.x/t,this.y/t,this.z/t)},this.get_magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},this.get_sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z}},Math3D.geometry.Vector3.EARTH_RADIUS=6378100,Math3D.geometry.Vector3.scale=function(t,i){return{x:t.x*i,y:t.y*i,z:t.z*i}},Math3D.geometry.Vector3.getLength=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},Math3D.geometry.Vector3.normalize=function(t){var i=Math3D.geometry.Vector3.getLength(t);return 0>=i?{x:0/0,y:0/0,z:0/0}:Math3D.geometry.Vector3.scale(t,1/i)},Math3D.geometry.Vector3.zero=function(){return new Math3D.geometry.Vector3(0,0,0)},Math3D.geometry.Vector3.axisX=function(){return new Math3D.geometry.Vector3(1,0,0)},Math3D.geometry.Vector3.axisY=function(){return new Math3D.geometry.Vector3(0,1,0)},Math3D.geometry.Vector3.axisZ=function(){return new Math3D.geometry.Vector3(0,0,1)},Math3D.geometry.Vector3.subVV=function(t,i){return new Math3D.geometry.Vector3(t.x-i.x,t.y-i.y,t.z-i.z)},Math3D.geometry.Vector3.distanceSquared=function(t,i){var h=t.x-i.x,e=t.y-i.y,n=t.z-i.z;return h*h+e*e+n*n},Math3D.geometry.Vector3.distance=function(t,i){var h=t.x-i.x,e=t.y-i.y,n=t.z-i.z;return Math.sqrt(h*h+e*e+n*n)},Math3D.geometry.Vector3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Math3D.geometry.Vector3.cross=function(t,i){var h=t.y*i.z-t.z*i.y,e=t.z*i.x-t.x*i.z,n=t.x*i.y-t.y*i.x;return new Math3D.geometry.Vector3(h,e,n)},Math3D.geometry.Vector3.project=function(t,i){return t.mul(Math3D.geometry.Vector3.dot(t,i))},Math3D.geometry.Vector3.lerp=function(t,i,h){var e=t.x+(i.x-t.x)*h,n=t.y+(i.y-t.y)*h,s=t.z+(i.z-t.z)*h;return new Math3D.geometry.Vector3(e,n,s)},Math3D.geometry.Vector3.latLonAltToCartesian=function(t){var i=Math.sin(t.y*Math.PI/180),h=Math.cos(t.y*Math.PI/180),e=Math.sin(t.x*Math.PI/180),n=Math.cos(t.x*Math.PI/180),s=Math3D.geometry.Vector3.EARTH_RADIUS+t.z,r={x:s*h*n,y:s*e,z:s*-i*n};return r},Math3D.geometry.Vector3.earthDistance=function(t,i){var h=Math3D.geometry.Vector3.dot(Math3D.geometry.Vector3.normalize(t),Math3D.geometry.Vector3.normalize(i)),e=Math.acos(h),n=Math3D.geometry.Vector3.EARTH_RADIUS*e;return n},Math3D.geometry.Intersection=function(){this.angleBetween2Lines=function(t,i,h,e,n,s,r,o){var a=Math.atan2(i-e,t-h),y=Math.atan2(s-o,n-o);return a-y},this.intersect=function(t,i,h,e,n,s,r,o){var a,y,u,c,M,m,x,g,f,D,l,z,v,p=function(t,i){return t*i>=0};if(a=e-i,u=t-h,M=h*i-t*e,f=a*n+u*s+M,D=a*r+u*o+M,0!=f&&0!=D&&p(f,D))return!1;if(y=o-s,c=n-r,m=r*s-n*o,x=y*t+c*i+m,g=y*h+c*e+m,0!=x&&0!=g&&p(x,g))return!1;l=a*c-y*u;var V=0,w=0;return 0==l?{x:V,y:w}:(z=0>l?-l/2:l/2,v=u*m-c*M,V=0>v?(v-z)/l:(v+z)/l,v=y*M-a*m,w=0>v?(v-z)/l:(v+z)/l,{x:V,y:w,angle:this.angleBetween2Lines(t,i,h,e,n,s,r,o)})}};